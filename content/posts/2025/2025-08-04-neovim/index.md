---
date: '2025-08-04 13:49:14'
title: 'ã€Neovimã€‘é‡æ„ç¼–è¾‘å™¨é…ç½®'
description: ""
tags: [Neovim, Vim]
categories: [Neovim]
math: true
---

## éœ€æ±‚æ¥æº

åœ¨ä½¿ç”¨ Neovim ä¸€å¹´å¤šä»¥åï¼Œå‘ç°ä¹‹å‰é…ç½®çš„ Neovim ä¸­çš„å¾ˆå¤šåŠŸèƒ½ç”¨ä¸ä¸Šï¼Œæ˜¾å¾— Neovim ä¸­çš„é…ç½®ååˆ†åœ°è‡ƒè‚¿ï¼Œå› æ­¤æ‰“ç®—é‡æ–°å†™ä¸€ä»½ Neovim çš„é…ç½®æŒ‡å—ï¼Œä¾¿äºåé¢é‡æ–°æ„å»º Neovimï¼Œä¹Ÿç»™éœ€è¦ä»é›¶å¼€å§‹æ„å»ºçš„æœ‹å‹ä»¬ä¸€ä¸ªå‚è€ƒã€‚

ç°åœ¨é…ç½®çš„ Neovim å…·æœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š

- èƒ½å¤Ÿè¿è¡Œ $\LaTeX$ å¹¶ä¸”æ”¯æŒå®æ—¶é¢„è§ˆï¼Œä¸€é”®æ¸…ç† $\LaTeX$ çš„é™„å±æ–‡ä»¶ï¼Œæ”¯æŒæ­£å‘æœç´¢å’Œåå‘æœç´¢
- èƒ½å¤Ÿæ–¹ä¾¿åœ°åˆ‡æ¢æ–‡ä»¶å¤¹ä¸­å’Œæ–‡ä»¶è¿›è¡Œç¼–è¾‘ï¼Œæä¾›ç±»ä¼¼ VS Code çš„æ–‡ä»¶æµè§ˆä¾§è¾¹æ 
- èƒ½å¤Ÿæ”¯æŒ $\LaTeX$ï¼ŒC++/C å’Œ Python ä»£ç çš„é«˜äº®å’Œè‡ªåŠ¨è¡¥å…¨
- æ”¯æŒ C++/C å’Œ Python ä»£ç çš„ç¼–è¯‘å’Œè¿è¡Œ
- å¥½çœ‹çš„ä¸»é¢˜å’Œç±» VS Code çš„ç•Œé¢ UI
- æ”¯æŒ Git æŸ¥çœ‹æ–°å¢å’Œä¿®æ”¹çš„ä»£ç æ®µï¼Œä¼˜åŒ– Git æäº¤æ˜¾ç¤º
- æ”¯æŒå½©è™¹é…å¯¹æ‹¬å·å’Œç‰¹æ®Šæ³¨é‡Šé«˜äº®
- è‡ªåŠ¨é«˜äº®å’Œå½“å‰å…‰æ ‡ä¸‹ç›¸å¯¹åº”çš„å•è¯
- æ˜¾ç¤ºä¸åŒç¼©è¿›å‚è€ƒçº¿
- æ”¯æŒå¿«é€ŸæŸ¥è¯¢å¿«æ·é”®å’Œ Git è®°å½•æŸ¥è¯¢
- è‡ªåŠ¨åˆ‡æ¢ä¸­è‹±è¾“å…¥æ³•
- ç¾è§‚çš„çŠ¶æ€æ ä»¥åŠä¸°å¯Œçš„å›¾æ ‡æ”¯æŒ
- æ”¯æŒæ¨¡ç³Šæœç´¢
- æ”¯æŒç»™æŒ‡å®šæ–‡æœ¬å¿«é€Ÿæ·»åŠ é…å¯¹ç¬¦å·å¦‚æ‹¬å·ã€å¼•å·ç­‰
- é›†æˆ Copilot AI è¾…åŠ©ä»£ç å’Œæ–‡æœ¬å†™ä½œ
- æ”¯æŒå¿«æ·æ³¨é‡Šå’Œå–æ¶ˆæ³¨é‡Šä»£ç å—
- æä¾›ç¼“å†²åŒºæ ‡ç­¾æ ï¼Œæ”¯æŒå¿«é€Ÿåˆ‡æ¢ç¼“å†²åŒºå’Œé¼ æ ‡æ“ä½œ
- æ”¯æŒæ’ä»¶ç®¡ç†ç•Œé¢å’Œæ‡’åŠ è½½
- æ”¯æŒè‡ªå®šä¹‰ä»£ç ç‰‡æ®µæ›¿æ¢å’Œæ’å…¥

<p class="note note-primary">å¦‚æœæƒ³è¦å¼€ç®±å³ç”¨ï¼Œæˆ‘ä¸ªäººçš„ Neovim é…ç½®çš„ä»“åº“åœ°å€ï¼š[neovim-config](https://github.com/chen-huaneng/neovim-config)</p>

## ç‰ˆæœ¬ä¿¡æ¯

æˆ‘ä½¿ç”¨çš„ç³»ç»Ÿæ˜¯ Windows 10 22H2ï¼Œæˆ‘çš„ Neovim ç‰ˆæœ¬ä¿¡æ¯å¦‚ä¸‹ï¼š

```text
NVIM v0.11.3
Build type: Release
LuaJIT 2.1.1741730670

   system vimrc file: "$VIM/sysinit.vim"
  fall-back for $VIM: "C:/Program Files (x86)/nvim/share/nvim"

Run :checkhealth for more info
```

## Neovim é…ç½®åŸºç¡€çŸ¥è¯†

### Lua è¯­è¨€

åœ¨é…ç½® Neovim çš„æ—¶å€™ï¼Œå°½é‡ä½¿ç”¨ Luaï¼Œå› ä¸ºè¿™æ˜¯ Neovim è€Œä¸æ˜¯ Vimï¼Œå¦‚æœå¯¹ Lua ä¸äº†è§£ï¼Œå¯ä»¥å¿«é€Ÿäº†è§£ä¸€ä¸‹åŸºæœ¬çš„è¯­æ³•å’Œè¯­ä¹‰ï¼š[Learn Lua in Y Minutes](https://learnxinyminutes.com/lua/)ã€‚

### é…ç½®æ–‡ä»¶è·¯å¾„

åœ¨ Windows 10 ç³»ç»Ÿä¸­ï¼ŒNeovim çš„é…ç½®æ–‡ä»¶è·¯å¾„ä¸€èˆ¬åœ¨ `C:\Users\<UserName>\AppData\Local\nvim\`ã€‚é»˜è®¤ä¼šè¯»å–è¯¥æ–‡ä»¶å¤¹ä¸‹çš„ `init.lua` æˆ–è€… `init.vim` æ–‡ä»¶ï¼Œè¿™ä¹Ÿæ˜¯é…ç½®æ–‡ä»¶çš„ä¸»å…¥å£ï¼Œ**ç†è®ºä¸Š**æ¥è¯´å¯ä»¥å°†æ‰€æœ‰çš„é…ç½®éƒ½å†™åˆ°è¿™ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œä½†æ˜¯è¿™ä¸æ˜¯ä¸€ä¸ªå¥½åšæ³•ï¼Œå› æ­¤åˆ’åˆ†æˆä¸åŒçš„æ–‡ä»¶å’Œç›®å½•æ¥ç®¡ç†ä¸åŒåŠŸèƒ½çš„é…ç½®ä¼šæ›´å¥½ã€‚

æœ¬ç¯‡æ•™ç¨‹é…ç½® Neovim ä¹‹åçš„ç›®å½•ç»“æ„åº”è¯¥æ˜¯ä¸‹é¢çš„æ ·å­ï¼š

```text
.
â”‚   im-select.exe
â”‚   init.lua
â”‚   lazy-lock.json
â”‚   
â”œâ”€â”€â”€lua
â”‚   â”‚   bootstrap.lua
â”‚   â”‚   
â”‚   â”œâ”€â”€â”€core
â”‚   â”‚       autocmds.lua
â”‚   â”‚       functions.lua
â”‚   â”‚       init.lua
â”‚   â”‚       keymaps.lua
â”‚   â”‚       options.lua
â”‚   â”‚       
â”‚   â””â”€â”€â”€plugins
â”‚       â”‚   autopairs.lua
â”‚       â”‚   bufferline.lua
â”‚       â”‚   colorscheme.lua
â”‚       â”‚   comment.lua
â”‚       â”‚   copilot.lua
â”‚       â”‚   gitsigns.lua
â”‚       â”‚   im-select.lua
â”‚       â”‚   indent-blankline.lua
â”‚       â”‚   local-highlight.lua
â”‚       â”‚   lualine.lua
â”‚       â”‚   luasnip.lua
â”‚       â”‚   nvim-tree.lua
â”‚       â”‚   nvim-web-devicons.lua
â”‚       â”‚   rainbow-delimiters.lua
â”‚       â”‚   surround.lua
â”‚       â”‚   telescope.lua
â”‚       â”‚   todo-comments.lua
â”‚       â”‚   treesitter.lua
â”‚       â”‚   vimtex.lua
â”‚       â”‚   which-key.lua
â”‚       â”‚   
â”‚       â””â”€â”€â”€lsp
â”‚               lspconfig.lua
â”‚               mason.lua
â”‚               nvim-cmp.lua
â”‚               vimtex-cmp.lua
â”‚               
â””â”€â”€â”€snippets
        tex.lua
```

è§£é‡Šå¦‚ä¸‹ï¼š

- `init.lua` ä¸º Neovim é…ç½®çš„ä¸»å…¥å£ï¼Œç”¨äºå¯¼å…¥å…¶ä»– `*.lua` æ–‡ä»¶ã€‚
- `lua` ç›®å½•ï¼Œå½“æˆ‘ä»¬åœ¨ Lua ä¸­è°ƒç”¨ `require` åŠ è½½æ¨¡å—ï¼ˆæ–‡ä»¶ï¼‰çš„æ—¶å€™ï¼Œå®ƒä¼šè‡ªåŠ¨åœ¨ `lua` æ–‡ä»¶å¤¹é‡Œè¿›è¡Œæœç´¢
  - å°†è·¯å¾„åˆ†éš”ç¬¦ä» `/` æ›¿æ¢ä¸º `.`ï¼Œç„¶åå»æ‰ `.lua` åç¼€å°±å¾—åˆ°äº† `require` çš„å‚æ•°æ ¼å¼
- `core` ç›®å½•ï¼Œç”¨äºç®¡ç†æ ¸å¿ƒé…ç½®å’Œ Neovim è‡ªå¸¦çš„é…ç½®
- `plugins` ç›®å½•ï¼Œç”¨äºç®¡ç†æ’ä»¶
- `snippets` ç›®å½•ï¼Œç”¨äºç®¡ç†è‡ªå®šä¹‰ä»£ç ç‰‡æ®µ

### é€‰é¡¹é…ç½®

ä¸»è¦ç”¨åˆ°çš„å°±æ˜¯ `vim.g`ã€`vim.opt`ã€`vim.cmd`

### æŒ‰é”®é…ç½®

åœ¨ Neovim ä¸­è¿›è¡ŒæŒ‰é”®ç»‘å®šçš„è¯­æ³•å¦‚ä¸‹ï¼š

```lua
vim.keymap.set(<mode>, <key>, <action>, <opts>)
```

## ä»é›¶å¼€å§‹é…ç½® Neovim

åœ¨é…ç½® Neovim çš„æ—¶å€™å¼„æ¸…æ¥šæ¯ä¸€ä¸ªé€‰é¡¹çš„æ„æ€æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œå› æ­¤ä¼šå°½é‡åœ¨æœ¬æ–‡ä¸­è¯´æ˜æ¯ä¸ªé€‰é¡¹çš„å«ä¹‰ï¼ŒåŒæ—¶åœ¨é…ç½®ä¸­ä¼šæœ‰ç›¸åº”çš„æ³¨é‡Šï¼Œå¦‚æœæ²¡æœ‰è¯´æ˜åˆ™è¯¥é€‰é¡¹çš„æ„ä¹‰åœ¨æ³¨é‡Šä¸­å¯ä»¥æ‰¾åˆ°ï¼Œå°½é‡è®©é…ç½®æ–‡ä»¶æ˜¯ **self-contained** è€Œä¸”å¯è¯»æ€§å¼ºã€‚

### å®‰è£… Neovim

æˆ‘ä½¿ç”¨çš„æ˜¯ [Scoop](https://chen-huaneng.github.io/2024/01/04/2024-01-04-2024-01-04-Scoop/)ï¼Œå› æ­¤å®‰è£… Neovim åªéœ€è¦åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œä¸‹é¢çš„æŒ‡ä»¤å°±å¯ä»¥ï¼š

```powershell
scoop install main/neovim
```

å®‰è£…å®Œæˆä¹‹åå¦‚æœä¸å­˜åœ¨å‰é¢è¯´çš„é…ç½®æ–‡ä»¶å¤¹å’Œç›¸åº”çš„ `init.lua` æ–‡ä»¶ï¼Œç›´æ¥åˆ›å»ºç›®å½•å¹¶æ–°å»º `init.lua` æ–‡ä»¶å³å¯ã€‚æ¯æ¬¡ä¿®æ”¹é…ç½®æ–‡ä»¶åï¼Œå°†é…ç½®æ–‡ä»¶ç¼–è¾‘ä¿å­˜ï¼Œé‡å¯ Neovim å°±èƒ½çœ‹åˆ°ç›¸åº”çš„æ•ˆæœã€‚æ¥ä¸‹æ¥ä¼šæŒ‰ç…§ Neovim å¯åŠ¨æ‰§è¡Œæ–‡ä»¶çš„é¡ºåºä»‹ç»å„ä¸ªæ¨¡å—ã€‚

### `init.lua` å…¥å£æ–‡ä»¶

Neovim å¯åŠ¨æ—¶é¦–å…ˆåŠ è½½çš„å°±æ˜¯ `init.lua` æ–‡ä»¶ï¼š

- `require("core")` åŠ è½½ `lua/core/init.lua`ï¼Œåˆå§‹åŒ–æ‰€æœ‰æ ¸å¿ƒç¼–è¾‘å™¨è®¾ç½®
- `require("bootstrap")` åŠ è½½ `lua/boostrap.lua`ï¼Œå¯åŠ¨å¹¶é…ç½® `lazy.nvim` æ’ä»¶ç®¡ç†å™¨

`init.lua` æ–‡ä»¶é…ç½®ï¼š

```lua
require("core")
require("bootstrap")
```

<p class="note note-info">`lazy-lock.json` æ–‡ä»¶ç”± `lazy.nvim` è‡ªåŠ¨ç”Ÿæˆå’Œç®¡ç†ï¼Œç”¨äºé”å®šæ‰€æœ‰æ’ä»¶çš„ commit hashï¼Œç¡®ä¿åœ¨ä¸åŒè®¾å¤‡ä¸Šæˆ–é‡è£…æ—¶èƒ½æ¢å¤åˆ°å®Œå…¨ç›¸åŒçš„æ’ä»¶ç‰ˆæœ¬ï¼Œä¿è¯äº†é…ç½®çš„ç¨³å®šæ€§ã€‚</p>

### `lua/core` æ ¸å¿ƒé…ç½®

#### `core/init.lua` æ ¸å¿ƒæ¨¡å—çš„å…¥å£

ä½œä¸º `core` æ¨¡å—çš„å…¥å£ï¼ŒæŒ‰é¡ºåºåŠ è½½æ‰€æœ‰æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼š

```lua
require("core.keymaps")
require("core.options")
require("core.autocmds")
require("core.functions")
```

#### `core/keymaps.lua` å®šä¹‰å…¨å±€å¿«æ·é”®

å®šä¹‰å…¨å±€çš„å¿«æ·é”®å’Œä¸€äº›æ’ä»¶çš„å¿«æ·é”®ï¼š

```lua
---------------------
-- Basic name norm --
---------------------

--[[
----------------------keymap---------------------------
  <C-z> which means Ctrl-z, <C-p> for Ctrl-p, and so on
  <CR> which means <Enter>
  <S-m> which means Shift-m
  <A-Left> which means Alt-Left arrow key
  <BS> which means Backspace key
------------------------mode---------------------------
  'n': normal mode
  'x': visual mode
the difference between 'x', 'v' and 's' see: https://vi.stackexchange.com/questions/38859/what-does-mode-x-mean-in-neovim
--]]

---------------------------
-- Define common options --
---------------------------

local opts = {
  noremap = true, -- non-recursive
  silent = true, -- do not show message
}

-- Shorten function name
local keymap = vim.api.nvim_set_keymap

--Remap space as leader key
vim.g.mapleader = " "

----------------------
-- Built-in mapping --
----------------------

-- Unmappings <C-z> and set to no actions (<nop>) which used to disable these shortcut keys
keymap("n", "<C-z>", "<nop>", opts)

-- Press <Enter> to clear search highlights results
keymap("n", "<CR>", "<cmd>noh<CR>", opts)

-- Press <Shift-m> to open the help documentation for the word at the cursor
keymap("n", "<S-m>", ':execute "help " . expand("<cword>")<cr>', opts)

-- The 'Y' key is remapped to copy to the end of the line, and the 'E' key is mapped to jump to the end of the previous word
keymap("n", "Y", "y$", opts)
keymap("n", "E", "ge", opts)
keymap("v", "Y", "y$", opts)
keymap("v", "E", "ge", opts) -- causes errors with luasnip autocmp

-- <S-h> and <S-l> are used to jump to the beginning and end of a row respectively
keymap("v", "<S-h>", "g^", opts)
keymap("v", "<S-l>", "g$", opts)
keymap("n", "<S-h>", "g^", opts)
keymap("n", "<S-l>", "g$", opts)

-- Use <C-h>, <C-j>, <C-k>, and <C-l> to navigate quickly between windows
keymap("n", "<C-h>", "<C-w>h", opts)
keymap("n", "<C-j>", "<C-w>j", opts)
keymap("n", "<C-k>", "<C-w>k", opts)
keymap("n", "<C-l>", "<C-w>l", opts)

-- Resize windows width and height with arrows
-- delta: 2 lines
keymap("n", "<C-Up>", ":resize -2<CR>", opts)
keymap("n", "<C-Down>", ":resize +2<CR>", opts)
keymap("n", "<C-Left>", ":vertical resize -2<CR>", opts)
keymap("n", "<C-Right>", ":vertical resize +2<CR>", opts)

-- Navigate between buffers through <TAB> and <S-TAB>
keymap("n", "<TAB>", ":bnext<CR>", opts)
keymap("n", "<S-TAB>", ":bprevious<CR>", opts)

-- Can continuously use <Tab> or <S-Tab> to change the indentation in selection mode
keymap("v", ">", ">gv", opts)
keymap("v", "<", "<gv", opts)

--------------------
-- Telescope.nvim --
--------------------

-- Start the find_files function in the Telescope plugin to search for project files
vim.keymap.set("n", "<C-p>", "<cmd>Telescope find_files<CR>", { remap = true })

------------------
-- Comment.nvim --
------------------

-- Toggle comments <Ctrl-/> line comments used to switch between the current line and the selected area
keymap('n', '<C-_>', '<Plug>(comment_toggle_linewise_current)', opts)
keymap('x', '<C-_>', '<Plug>(comment_toggle_linewise_visual)', opts)

-----------------
-- Copilot.vim --
-----------------

-- Change the shortcut key for accepting Copilot suggestions
vim.keymap.set('i', '<C-R>', 'copilot#Accept("\\<CR>")', {
  expr = true,
  replace_keycodes = false
})
vim.g.copilot_no_tab_map = true

```

### `core/options.lua` å…¨å±€é€‰é¡¹é…ç½®

å®šä¹‰ Neovim çš„å…¨å±€é€‰é¡¹é…ç½®ï¼š

```lua
local options = {

  -- GENERAL
  timeoutlen = 500,               -- time to wait for a mapped sequence to complete (in milliseconds), keyboard shortcut waiting time
  updatetime = 300,               -- faster completion (4000ms default), update the inspection interval time
  swapfile = false,               -- creates a swap file
  undofile = true,                -- enable persistent undo
  writebackup = false,            -- if a file is being edited by another program, it is not allowed to be edited
  backup = false,           -- backup file creation
  confirm = true,           -- a confirmation pops up when there is no save or the file is read-only

  -- APPEARANCE
  fileencoding = "UTF-8",         -- the encoding written to a file
  encoding = "UTF-8",             -- UTF-8 encoding is used when processing text
  guifont = "monospace:h17",      -- the font used in graphical neovim applications
  background = "dark",            -- colorschemes that can be light or dark will be made dark
  termguicolors = true,           -- set term gui colors (most terminals support this)
  conceallevel = 0,               -- so that `` is visible in markdown files
  number = true,                  -- show numbered lines
  relativenumber = true,          -- set relative numbered lines
  numberwidth = 2,                -- set number column width to 2 {default 4}
  signcolumn = "yes",             -- always show the sign column, otherwise it would shift the text each time
  cursorline = true,              -- highlight the current line
  wrap = true,                    -- display lines as one long line, enable line breaks
  showbreak = "â†ª ",               -- set indent of wrapped lines
  cmdheight = 1,                  -- space in the neovim command line for displaying messages, command line height
  pumheight = 10,                 -- pop up menu height, the height of the completed menu
  wildmenu = true,                -- display the completion menu
  splitbelow = true,              -- force all horizontal splits to go below current window
  splitright = true,              -- force all vertical splits to go to the right of current window
  scrolloff = 999,                  -- minimal number of screen lines to keep above and below the cursor, achieve an effect similar to that of a Typora typewriter

  -- INDENT
  tabstop = 4,                    -- show 4 spaces for a tab
  shiftwidth = 4,                 -- the number of spaces inserted for each indentation
  softtabstop = 4,                -- insert 4 spaces for a tab
  expandtab = true,               -- convert tabs to spaces
  breakindent = true,             -- tab wrapped lines
  linebreak = true,               -- companion to wrap, don't split words
  backspace = "indent,eol,start", -- allow backspace on indent, end of line or insert mode start position
  smarttab = true,                -- automatically adjust the indentation length of the new line based on the indentation of the current line
  shiftround = true,              -- align to multiples of shiftwidth when moving with >> and <<
  autoindent = true,              -- indentation of the new line is aligned to the current line
  smartindent = true,             -- enable universal intelligent indentation

  -- EDIT
  spell = false,                   -- turns on spellchecker
  clipboard = "unnamedplus",      -- allows neovim to access the system clipboard
  mouse = "a",                    -- allow the mouse to be used in neovim
  ignorecase = true,              -- ignore case in search patterns
  smartcase = true,               -- when searching for capital letters, it automatically distinguishes between upper and lower case
  hlsearch = true,                -- search highlighting
  incsearch = true,               -- when entering the search mode, each character input automatically jumps to the first matching result
  showmatch = true,               -- highlight the matching parentheses
  virtualedit = "block",          -- vitualblock mode doesn't get stuck at the end of line
  inccommand = "split",           -- shows all inline replacements in split
  autoread = true,                -- external file modifications are automatically loaded
  whichwrap = "<,>,[,]",          -- when the cursor is moved to the beginning or end of a line, it can be moved across lines
  list = false,                   -- do not display invisible characters
  listchars = "space:Â·,tab:>-",   -- display methods of spaces and tabs
}

-- turns on all values in options table above
for k, v in pairs(options) do
  vim.opt[k] = v
end
```

### `core/autocmds.lua` è‡ªåŠ¨å‘½ä»¤é…ç½®

è®¾ç½®è‡ªåŠ¨å‘½ä»¤ï¼Œç”¨äºåœ¨ç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶æ‰§è¡Œæ“ä½œï¼š

```lua
local api = vim.api

-- close help, man, qf, lspinfo with 'q'
api.nvim_create_autocmd(
  "FileType",
  {
    pattern = { "man", "help", "qf", "lspinfo" }, -- "startuptime",
    command = "nnoremap <buffer><silent> q :close<CR>",
  }
)

-- Terminal mappings 
--[[
  The set_terminal_keymaps function is defined. In terminal mode, the shortcut key <esc> is mapped to <C-c>, which can be used to quickly exit terminal mode.
  Navigate between different Windows with <C-h>, <C-j>, <C-k>, and <C-l>. When the terminal is opened (TermOpen), set_terminal_keymaps() is automatically called.
  Press <C-w> to exit from Terminal mode to Normal mode.
--]]
function _G.set_terminal_keymaps()
  local opts = { buffer = 0 }
  vim.keymap.set('t', '<esc>', [[<C-c>]], opts)
  vim.keymap.set('t', '<C-h>', [[<Cmd>wincmd h<CR>]], opts)
  vim.keymap.set('t', '<C-j>', [[<Cmd>wincmd j<CR>]], opts)
  vim.keymap.set('t', '<C-k>', [[<Cmd>wincmd k<CR>]], opts)
  vim.keymap.set('t', '<C-l>', [[<Cmd>wincmd l<CR>]], opts)
  vim.keymap.set('t', '<C-w>', [[<C-\><C-n><C-w>]], opts)
end

vim.api.nvim_create_autocmd({ "TermOpen" }, {
  pattern = { "term://*" }, -- use term://*toggleterm#* for only ToggleTerm
  command = "lua set_terminal_keymaps()",
})
```

### `core/functions.lus` è‡ªå®šä¹‰å‡½æ•°

å­˜æ”¾å¯è¢«å¤ç”¨çš„è‡ªå®šä¹‰ Lua å‡½æ•°ï¼š

```lua
-- Used to find the word under the cursor
function SearchWordUnderCursor()
    local word = vim.fn.expand('<cword>') -- get the word under the cursor
    require('telescope.builtin').live_grep({ default_text = word }) -- invoke the live_grep function of the Telescope plugin
end
```

## `lua/bootstrap.lua` æ’ä»¶ç®¡ç†å™¨

è´Ÿè´£ `lazy.nvim` æ’ä»¶ç®¡ç†å™¨çš„å®‰è£…å’Œé…ç½®ï¼Œä¸»è¦åŠŸèƒ½ï¼š

- è‡ªåŠ¨æ£€æŸ¥ `lazy.nvim` æ˜¯å¦å®‰è£…ï¼Œå¦‚æœæœªå®‰è£…åˆ™ä» Github ä¸‹è½½
- è°ƒç”¨ `require("lazy").setup()`ï¼Œå¹¶ä» `lua/plugins` å’Œ `lua/plugins/lsp` ç›®å½•å¯¼å…¥æ‰€æœ‰æ’ä»¶é…ç½®
- è‡ªå®šä¹‰ `lazy.nvim` çš„ç•Œé¢å›¾æ ‡

æ–‡ä»¶é…ç½®ï¼š

```lua
-- Bootstrap lazy.nvim
local lazypath = vim.fn.stdpath("data") .. "/lazy/lazy.nvim"
-- Check if lazy.nvim is installed (check if the path exists)
if not (vim.uv or vim.loop).fs_stat(lazypath) then
  -- Define the remote repository address of lazy.nvim
  local lazyrepo = "https://github.com/folke/lazy.nvim.git"
  -- Clone the path from the repository to the local area
  local out = vim.fn.system({
    "git", 
    "clone", 
    "--filter=blob:none",  -- Optimize cloning speed and only download necessary files
    "--branch=stable",     -- Use the stable branch
    lazyrepo, 
    lazypath
  })
  -- If the clone fails (git returns a non-zero error code)
  if vim.v.shell_error ~= 0 then
    -- Display error messages and debug output
    vim.api.nvim_echo({
      { "Failed to clone lazy.nvim:\n", "ErrorMsg" },
      { out, "WarningMsg" },
      { "\nPress any key to exit..." },
    }, true, {})
    -- Wait for the user to press the button and exit
    vim.fn.getchar()
    os.exit(1)
  end
end

-- Add the path of the lazy.nvim plugin manager to the runtime path (rtp) of Neovim
vim.opt.rtp:prepend(lazypath)

-- Initialize the lazy.nvim plugin manager
require("lazy").setup({
  -- Plugin configuration module
  { import = "plugins" },       -- main plugin directory (lua/plugins directory)
  { import = "plugins.lsp" }    -- LSP plugin directory (lua/plugins/lsp directory)
}, {
  -- Configuration options of the plugin manager
  install = {
    colorscheme = { "gruvbox" },  -- Automatically install the gruvbox color theme during installation
  },
  checker = {
    enabled = true,               -- Enables plugins version checking (check for updates)
    notify = false,               -- Does not pop up notifications when an update is detected
  },
  change_detection = {
    notify = false,               -- No notification pops up when the plugin file is changed
  },
  ui = {
    icons = {
      -- Custom UI icons
      cmd = "âŒ˜",            -- command
      config = "ğŸ› ",        -- configuration
      event = "ğŸ“…",         -- event
      ft = "ğŸ“‚",            -- file type
      init = "âš™",          -- initialization shell
      keys = "ğŸ—",          -- keys binding
      plugin = "ğŸ”Œ",        -- plugins
      runtime = "ğŸ’»",       -- running
      require = "ğŸŒ™",       -- require invocation
      source = "ğŸ“„",        -- source file
      start = "ğŸš€",         -- start plugins
      task = "ğŸ“Œ",          -- task
      lazy = "ğŸ’¤ ",         -- lazy plugins
    },
  },
})
```

## `lua/plugins` æ’ä»¶é…ç½®

### `plugins/lsp` ä»£ç åˆ†æä¸è¡¥å…¨

`lsp/` ç›®å½•ç”¨äºå­˜æ”¾æ‰€æœ‰ä¸ LSPï¼ˆLanguage Server Protocolï¼‰ã€ä»£ç è¡¥å…¨å’Œè¯­æ³•åˆ†æç›¸å…³çš„æ’ä»¶ã€‚

#### `lspconfig.lua` ä¸»é…ç½®æ–‡ä»¶

ç”¨äºè¿æ¥ `mason` å®‰è£…çš„ LSP æœåŠ¡å™¨åˆ° Neovim çš„ LSP å®¢æˆ·ç«¯ã€‚

```lua
return {
  "neovim/nvim-lspconfig",
  event = { "BufReadPre", "BufNewFile" }, -- Load when opening/creating a new file
  dependencies = {
    { "hrsh7th/cmp-nvim-lsp" }, -- Provide LSP completion capability for auto-completion plugins (such as nvim-cmp)
    { "antosha417/nvim-lsp-file-operations", config = true }, -- Automatically handle file operations (such as synchronizing file structures when renaming)
  },
  config = function()
    -- import lspconfig plugin
    local lspconfig = require("lspconfig")

    -- import cmp-nvim-lsp plugin
    local cmp_nvim_lsp = require("cmp_nvim_lsp")

    -- used to enable autocompletion (assign to every lsp server config)
    local default = cmp_nvim_lsp.default_capabilities()

    -- change the diagnostic symbols in the sign column (gutter)
    vim.diagnostic.config({
      signs = {
        text = {
          [vim.diagnostic.severity.ERROR] = "ï—", -- error
          [vim.diagnostic.severity.WARN] = "ï±",  -- warning
          [vim.diagnostic.severity.INFO] = "ïš",  -- information
          [vim.diagnostic.severity.HINT] = "ó°  ",  -- hint
        }
      },
      update_in_insert = true,  -- real-time update diagnosis in insertion mode
      underline = true,  -- display error line
    })

    -- configure python server
    lspconfig["pyright"].setup({
      capabilities = default, -- enable default capabilities (including completion)
      filetypes = { "python" },  -- only useful to .py file type
    })

    -- configure cpp server
    lspconfig["clangd"].setup({
      capabilities = default, -- enable default capabilities (including completion)
      filetypes = { "h", "c", "cpp", "cc", "objc", "objcpp"}, -- supported file type
      single_file_support = true, -- enable single-file mode (applicable to large-scale projects)
    })
  end,
}
```

#### `mason.lua` LSP ç®¡ç†

æ ¸å¿ƒçš„ LSP ç®¡ç†å·¥å…·ï¼Œç”¨äºå®‰è£…å’Œç®¡ç† LSP æœåŠ¡å™¨ã€ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼ˆFormatterï¼‰å’Œä»£ç æ£€æŸ¥å·¥å…·ï¼ˆLinterï¼‰ã€‚

```lua
return {
  "williamboman/mason.nvim",
  ft ={ "py", "cpp", "c", "tex", "bib", "h", "cc", "objc", "objcpp" }, -- Specify the supported file types
  dependencies = {
    "williamboman/mason-lspconfig.nvim", -- Used for managing the installation and configuration of LSP servers
    "WhoIsSethDaniel/mason-tool-installer.nvim", -- Used for managing the installation of development tools (such as formatters, linters)
  },

  config = function()
    -- import mason
    local mason = require("mason")

    -- import mason-lspconfig
    local mason_lspconfig = require("mason-lspconfig")

    -- import mason-tool-installer
    local mason_tool_installer = require("mason-tool-installer")

    -- enable mason and configure icons
    mason.setup({
      ui = {
        icons = {
          package_installed = "âœ“",   -- installed packages
          package_pending = "âœ",     -- the package being installed
          package_uninstalled = "âœ—", -- uninstalled package
        },
      },
    })

    mason_lspconfig.setup({
      -- list of servers for mason to install
      ensure_installed = {
        "pyright", -- python LSP
        "clangd",  -- cpp LSP
      },
      -- auto-install configured servers (with lspconfig)
      automatic_installation = true, -- not the same as ensure_installed
    })

    mason_tool_installer.setup({
      ensure_installed = {
        "clang-format", -- cpp formatter
        "black",    -- python formatter
        "pylint",   -- python linter
        "flake8",     -- Python static analysis
        "bandit",     -- Python security check
        "cpplint",    -- cpp linter
      },
    })
  end,
}
```

#### `nvim-cmp.lua` è‡ªåŠ¨è¡¥å…¨

æ ¸å¿ƒçš„è‡ªåŠ¨è¡¥å…¨å¼•æ“æ’ä»¶ï¼š

```lua
return {
  "hrsh7th/nvim-cmp",
  event = { "InsertEnter", "CmdlineEnter" }, -- Load the plugin when entering in insert mode or command-line mode
  dependencies = {
    "hrsh7th/cmp-buffer", -- source for text in buffer
    "hrsh7th/cmp-path", -- source for file system paths
    "L3MON4D3/LuaSnip", -- snippet engine
    "saadparwaiz1/cmp_luasnip", -- for autocompletion
    -- "onsails/lspkind.nvim", -- vs-code like pictograms
    "hrsh7th/cmp-cmdline", -- command-line mode completion
    "petertriho/cmp-git", -- git command completion
    "f3fora/cmp-spell", -- spelling check completion
    "micangl/cmp-vimtex", -- LaTeX completion (VimTeX Plugin)
  },
  config = function()

    local cmp = require("cmp")

    local luasnip = require("luasnip")

------------------------
-- Icon configuration --
------------------------

    local kind_icons = {
      article = "ó°§®", -- article type (LaTeX)
      book = "ï…", -- book type (LaTeX)
      incollection = "ó±“·", -- collection type (LaTeX)
      Function = "ó°Š•", -- function
      Constructor = "ï¥", -- constructor
      Text = "ó°¦¨", -- plain text
      Method = "ï’‡", -- method
      Field = "ó°…ª", -- field/attribute
      Variable = "ó±ƒ®", -- variable
      Class = "î˜‹", -- class
      Interface = "ïƒ¨", -- interface
      Module = "ï’‡", -- module
      Property = "ï‚­", -- property
      Unit = "îˆŸ", -- unit 
      Value = "ó°š¯", -- value
      Enum = "ï…", -- enumeration
      Keyword = "ï“Ÿ", -- keyword
      Snippet = "ïƒ„", -- code snippet
      -- Color = "ó°Œ", -- color
      Color = "î­œ", -- color
      File = "î©»", -- file
      Reference = "ï’½", -- reference
      Folder = "ï¼", -- folder
      EnumMember = "ï“·", --enumeration member
      spell = "î¾³",
      -- EnumMember = "ï…",
      Constant = "ó°€«", -- constant
      Struct = "î®º",
      -- Struct = "ï†³",
      Event = "ïƒ§", -- event
      Operator = "ó°˜§", -- operator
      TypeParameter = "ï‘", -- type parameter
    }
    -- find more here: https://www.nerdfonts.com/cheat-sheet

----------------------
-- Completion logic --
----------------------

    cmp.setup({
      completion = {
        completeopt = "menu,noselect", -- Complete menu behavior (not automatically selected)
        keyword_length = 1, -- At least one character is entered to trigger completion
      },
      snippet = { -- configure how nvim-cmp interacts with snippet engine
        expand = function(args)
          luasnip.lsp_expand(args.body) -- Extend the snippet using LuaSnip
        end,
      },

-----------------
-- Key mapping --
-----------------

      mapping = cmp.mapping.preset.insert({
        ["<CR>"] = cmp.mapping.confirm({ select = true }), -- Press Enter to confirm completion (no forced selection)

        -- supertab
        ["<Tab>"] = cmp.mapping(function(fallback)
          if cmp.visible() then
            cmp.select_next_item()
          elseif luasnip.locally_jumpable(1) then
            luasnip.jump(1)
          elseif luasnip.expandable() then
            luasnip.expand()
          else
            fallback()
          end
        end, { "i", "s" }),
        ["<S-Tab>"] = cmp.mapping(function()
          if cmp.visible() then
            cmp.select_prev_item()
          elseif luasnip.locally_jumpable(-1) then
            luasnip.jump(-1)
          else
            -- fallback()
          end
        end, { "i", "s" }),
      }),

-----------------------------------
-- Formatting for autocompletion --
-----------------------------------

      formatting = {
        fields = { "kind", "abbr", "menu" }, -- Completed item display fields (type, abbreviation, source)
        format = function(entry, vim_item)
          vim_item.kind = string.format("%s", kind_icons[vim_item.kind]) -- Kind icons
          vim_item.menu = ({
            vimtex = vim_item.menu,
            luasnip = "[Snippet]",
            nvim_lsp = "[LSP]",
            buffer = "[Buffer]",
            spell = "[Spell]",
            cmdline = "[CMD]",
            path = "[Path]",
          })[entry.source.name]
          return vim_item
        end,
      },

--------------------------------
-- Sources for autocompletion --
--------------------------------

      sources = cmp.config.sources({
        { name = "nvim_lsp" },
        { name = "luasnip" }, -- snippets
        { name = "vimtex" },
        { name = "buffer", keyword_length = 3 }, -- text within current buffer
        { name = "spell",
          keyword_length = 4,
          option = {
              keep_all_entries = false,
              enable_in_context = function()
                  return true -- Always enable spell check
              end
          },
        },
        { name = "path" },
      }),

-------------------------
-- Other configuration --
-------------------------

      confirm_opts = {
        behavior = cmp.ConfirmBehavior.Replace, -- Replace the current cursor content
        select = false,
      },
      view = {
        entries = 'custom', -- Customize the display method of completion items
      },
      window = {
        completion = cmp.config.window.bordered(), -- Complete the window with a border
        documentation = cmp.config.window.bordered(), -- Documentation window with a border
      },
      performance = {
         trigger_debounce_time = 500,
         throttle = 550,
         fetching_timeout = 80,
      },
    })

    -- `/` cmdline setup.
    cmp.setup.cmdline('/', {
      mapping = cmp.mapping.preset.cmdline(),
      sources = {
        {name = 'buffer'}
      }
    })

    -- `:` cmdline setup.
    cmp.setup.cmdline(':', {
      mapping = cmp.mapping.preset.cmdline(),
      sources = {
        {name = 'path'},
        {name = 'cmdline'}
      }
    })

  end,
}
```

#### `vimtex-cmp.lua` $\LaTeX$ æ”¯æŒ

é€šè¿‡æ˜¾ç¤ºé¢å¤–ä¿¡æ¯ã€ç¬¦å·å’Œ BibTeX è§£æï¼Œæå‡ LaTeX ç¼–è¾‘æ•ˆç‡ï¼š

```lua
return {
  "micangl/cmp-vimtex",
  ft = { "tex", "bib", "cls" }, -- Only loaded when .tex .bib .cls files are opened
  config = function()
    require('cmp_vimtex').setup({
      additional_information = {
        info_in_menu = true,
        info_in_window = true,
        info_max_length = 60,
        match_against_info = true,
        symbols_in_menu = true,
      },
      bibtex_parser = {
        enabled = true,
      },
    })
  end,
}
```

### `plugins/autopairs.lua` è‡ªåŠ¨è¡¥å…¨æ‹¬å·

è‡ªåŠ¨è¡¥å…¨æ‹¬å·ã€å¼•å·ç­‰æˆå¯¹ç¬¦å·ï¼š

```lua
return {
  "windwp/nvim-autopairs",
  event = { "InsertEnter" },
  dependencies = {
    "hrsh7th/nvim-cmp",
  },
  config = function()
    -- import nvim-autopairs
    local autopairs = require("nvim-autopairs")

    -- configure autopairs
    autopairs.setup({
      check_ts = true,                      -- enable treesitter
      disable_filetype = { "TelescopePrompt", "spectre_panel" },
      disable_in_macro = true,
      disable_in_replace_mode = true,
      enable_moveright = true,
      ignored_next_char = "",
      enable_check_bracket_line = true, --- check bracket in same line
    })

    local Rule = require 'nvim-autopairs.rule'

    local cond = require 'nvim-autopairs.conds'

    autopairs.add_rules({
      Rule("`", "'", "tex"),
      Rule("$", "$", "tex"),
      Rule(' ', ' ')
          :with_pair(function(opts)
            local pair = opts.line:sub(opts.col, opts.col + 1)
            return vim.tbl_contains({ '$$', '()', '{}', '[]', '<>' }, pair)
          end)
          :with_move(cond.none())
          :with_cr(cond.none())
          :with_del(function(opts)
            local col = vim.api.nvim_win_get_cursor(0)[2]
            local context = opts.line:sub(col - 1, col + 2)
            return vim.tbl_contains({ '$  $', '(  )', '{  }', '[  ]', '<  >' }, context)
          end),
      Rule("$ ", " ", "tex")
          :with_pair(cond.not_after_regex(" "))
          :with_del(cond.none()),
      Rule("[ ", " ", "tex")
          :with_pair(cond.not_after_regex(" "))
          :with_del(cond.none()),
      Rule("{ ", " ", "tex")
          :with_pair(cond.not_after_regex(" "))
          :with_del(cond.none()),
      Rule("( ", " ", "tex")
          :with_pair(cond.not_after_regex(" "))
          :with_del(cond.none()),
      Rule("< ", " ", "tex")
          :with_pair(cond.not_after_regex(" "))
          :with_del(cond.none()),
    })

    autopairs.get_rule('$'):with_move(function(opts)
      return opts.char == opts.next_char:sub(1, 1)
    end)

    -- import nvim-cmp plugin (completions plugin)
    local cmp = require("cmp")

    -- import nvim-autopairs completion functionality
    local cmp_autopairs = require("nvim-autopairs.completion.cmp")

    -- make autopairs and completion work together
    cmp.event:on(
      'confirm_done',
      cmp_autopairs.on_confirm_done({
        filetypes = {
          tex = false -- Disable for tex
        }
      })
    )
  end,
}
```

### `bufferline.lua` ç¼“å†²åŒºæ ‡ç­¾æ 

åœ¨é¡¶éƒ¨æ˜¾ç¤ºä¸€ä¸ªç±»ä¼¼ VSCode çš„æ ‡ç­¾æ ï¼Œç”¨äºå±•ç¤ºå’Œåˆ‡æ¢æ‰“å¼€çš„ç¼“å†²åŒºï¼š

```lua
return {
  "akinsho/bufferline.nvim",
  dependencies = { "nvim-tree/nvim-web-devicons" },
  version = "*",
  config = function()
    local bufferline = require('bufferline')
    bufferline.setup({
      options = {
        mode = "buffers",
        separator_style = "slant",
        close_command = "bdelete! %d", -- Use the Lua API to close the buffer
        diagnostics = false,           -- OR: | "nvim_lsp" 
        diagnostics_update_in_insert = false,
        show_tab_indicators = false,
        show_close_icon = false,
        -- numbers = "ordinal", -- Display buffer numbers as ordinal numbers
        sort_by = 'insert_after_current', -- OR: 'insert_at_end' | 'tabs' | 'extension' | 'relative_directory' | 'directory' | 'id' |
        offsets = {
          {
            filetype = "NvimTree",
            -- text = "Explorer",
            text = function()
              return vim.fn.getcwd()
            end,
            highlight = "Directory",
            separator = "", -- use a "true" to enable the default, or set your own character
            -- padding = 1
          }
        },
        hover = {
          enabled = true,
          delay = 30,
          reveal = { 'close' }
        },
        vim.api.nvim_create_autocmd("User", {
          pattern = "AlphaReady",
          desc = "disable tabline for alpha",
          callback = function()
            vim.opt.showtabline = 0
          end,
        }),
        vim.api.nvim_create_autocmd("BufUnload", {
          buffer = 0,
          desc = "enable tabline after alpha",
          callback = function()
            vim.opt.showtabline = 2
          end,
        })
      },
    })
  end,
}
```

### `colorscheme.lua` é¢œè‰²ä¸»é¢˜

è®¾ç½® `gruvbox` ä¸ºä¸»é¢œè‰²ä¸»é¢˜ï¼Œå¹¶è¦†ç›–äº†ä¸€äº›é«˜äº®ç»„ä»¥ä¼˜åŒ–æ˜¾ç¤ºæ•ˆæœï¼š

```lua
-- GRUVBOX
return {
  "ellisonleao/gruvbox.nvim",
  priority = 1000, -- make sure to load this before all the other start plugins
  config = function()
    require("gruvbox").setup({
      overrides = {
        SignColumn = { bg = "#282828" },
        NvimTreeCutHL = { fg = "#fb4934", bg = "#282828" },
        NvimTreeCopiedHL = { fg = "#b8bb26", bg = "#282828" },
        DiagnosticSignError = { fg = "#fb4934", bg = "#282828" },
        DiagnosticSignWarn = { fg = "#fabd2f", bg = "#282828" },
        DiagnosticSignHint = { fg = "#8ec07c", bg = "#282828" },
        DiagnosticSignInfo = { fg = "#d3869b", bg = "#282828" },
      }
    })
    vim.cmd("colorscheme gruvbox")
  end,
}
```

### `comment.lua` æ³¨é‡Šæ’ä»¶

å¼ºå¤§çš„æ³¨é‡Šæ’ä»¶ï¼Œé€šè¿‡ `<C-/>` æ™ºèƒ½åˆ‡æ¢æ³¨é‡Šï¼š

```lua
return {
  "numToStr/Comment.nvim",
  event = { "BufReadPre", "BufNewFile" },
  dependencies = {
    "JoosepAlviste/nvim-ts-context-commentstring",
  },
  config = function()
    -- import comment plugin safely
    local comment = require("Comment")

    local ts_context_commentstring = require("ts_context_commentstring.integrations.comment_nvim")

    -- enable comment
    comment.setup({
      --Add a space b/w comment and the line
      padding = true,
      ---Whether the cursor should stay at its position
      sticky = true,
      ---Lines to be ignored while (un)comment
      ignore = nil,
      ---Function to call before (un)comment
      pre_hook = ts_context_commentstring.create_pre_hook(), -- for commenting tsx and jsx files
      mappings = {
        ---Operator-pending mapping; `gcc` `gbc` `gc[count]{motion}` `gb[count]{motion}`
        basic = false,
        ---Extra mapping; `gco`, `gcO`, `gcA`
        extra = false,
      },
    })
  end,
}
```

### `copilot.lua` é›†æˆ AI

é›†æˆ GitHub Copilotï¼Œæä¾› AI ä»£ç å»ºè®®ï¼š

```lua
return {
  "github/copilot.vim",
  init = function()
    vim.g.copilot_enabled = false -- Set Copilot to be disabled by default
  end,
}
```

### `gitsigns.lua` Git çŠ¶æ€é›†æˆ

åœ¨è¡Œå·åˆ—æ˜¾ç¤º Git çŠ¶æ€ï¼ˆæ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤ï¼‰ï¼š

```lua
return {
  "lewis6991/gitsigns.nvim",
  event = { "BufReadPre", "BufNewFile" },
  config = function()
    require("gitsigns").setup({
      signs = {
        add = { text = "â–" },
        change = { text = "â–" },
        delete = { text = "â–" },
        topdelete = { text = "â–" },
        changedelete = { text = "â–" },
        untracked    = { text = "â”†" },
      },
      signcolumn = true, -- Toggle with `:Gitsigns toggle_signs`
      numhl = false, -- Toggle with `:Gitsigns toggle_numhl`
      linehl = false, -- Toggle with `:Gitsigns toggle_linehl`
      word_diff = false, -- Toggle with `:Gitsigns toggle_word_diff`
      watch_gitdir = {
        interval = 1000,
        follow_files = true,
      },
      attach_to_untracked = true,
      current_line_blame = false, -- Toggle with `:Gitsigns toggle_current_line_blame`
      current_line_blame_opts = {
        virt_text = true,
        virt_text_pos = "eol", -- 'eol' | 'overlay' | 'right_align'
        delay = 1000,
        ignore_whitespace = false,
      },
      sign_priority = 6,
      update_debounce = 100,
      status_formatter = nil, -- Use default
      max_file_length = 40000,
      preview_config = {
        -- Options passed to nvim_open_win
        border = "single",
        style = "minimal",
        relative = "cursor",
        row = 0,
        col = 1,
      },
    })
  end
}
```

### `im-select.lua` è‡ªåŠ¨åˆ‡æ¢è¾“å…¥æ³•

 è‡ªåŠ¨åˆ‡æ¢ä¸­è‹±è¾“å…¥æ³•ï¼š

```lua
return {
    "keaising/im-select.nvim",
    config = function()
        require("im_select").setup({})
    end,
}
```

### `indent-blankline.lua` æ˜¾ç¤ºç¼©è¿›å‚è€ƒçº¿

æ˜¾ç¤ºç¼©è¿›å‚è€ƒçº¿ï¼Œä½¿ä»£ç ç»“æ„æ›´æ¸…æ™°ï¼š

```lua
return {
  "lukas-reineke/indent-blankline.nvim",
  version = "*",
  event = { "BufReadPre", "BufNewFile" },
  config = function()
    require("ibl").setup({
      indent = {
        char = "â”‚",
        tab_char = "â”‚",
        highlight = "IblIndent",
        smart_indent_cap = true,
        priority = 1,
        repeat_linebreak = true,
      },
      scope = {
        enabled = true,
        char = nil,
        show_start = false,
        show_end = false,
        show_exact_scope = false,
        injected_languages = true,
        highlight = "IblScope",
        priority = 1024,
        include = {
          node_type = { ["*"] = { "*" } }, -- makes lines show on all blocks
        },
      },
      exclude = {
        filetypes = {
          "help",
          "alpha",
          "dashboard",
          "NvimTree",
          "Trouble",
          "trouble",
          "lazy",
          "mason",
          "notify",
          "toggleterm",
          "lspinfo",
          "checkhealth",
          "man",
          "gitcommit",
          "TelescopePrompt",
          "TelescopeResults",
          "",
        },
        buftypes = {
          "terminal",
          "nofile",
          "quickfix",
          "prompt",
        },
      },
    })
  end
```

### `local-highlight.lua` è‡ªåŠ¨é«˜äº®

è‡ªåŠ¨é«˜äº®å…‰æ ‡ä¸‹çš„æ‰€æœ‰ç›¸åŒå•è¯ï¼š

```lua
return {
  'tzachar/local-highlight.nvim',
  config = function()
    require('local-highlight').setup({
      -- file_types = {'python', 'cpp'}, -- If this is given only attach to this
      -- OR attach to every filetype except:
      disable_file_types = {},
      hlgroup = 'Pmenu', -- change highlight color to value given in table found by running :highlight
      cw_hlgroup = nil,
      insert_mode = false,
      animate = {
        enabled = false,
      },
    })
  end
}
```

### `lualine.lua` ä¸°å¯ŒçŠ¶æ€æ 

é…ç½®ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„çŠ¶æ€æ ï¼Œæ˜¾ç¤ºæ¨¡å¼ã€Git åˆ†æ”¯ã€è¯Šæ–­ä¿¡æ¯ã€æ–‡ä»¶åç­‰ï¼š

```lua
return {
  "nvim-lualine/lualine.nvim",
  dependencies = { "nvim-tree/nvim-web-devicons" },
  config = function()
    require('lualine').setup({
      options = {
        icons_enabled = true,
        theme = 'gruvbox',
        component_separators = { left = 'î‚±', right = 'î‚³'},
        section_separators = { left = 'î‚°', right = 'î‚²'},
        disabled_filetypes = {
          statusline = {},
          winbar = {},
        },
        ignore_focus = {},
        always_divide_middle = true,
        globalstatus = false,
        refresh = {
          statusline = 1000,
          tabline = 1000,
          winbar = 1000,
        }
      },
      sections = {
        lualine_a = {'mode'},
        lualine_b = {'branch', 'diff', 'diagnostics'},
        lualine_c = {'filename'},
        lualine_x = {'encoding', 'fileformat', 'filetype'},
        lualine_y = {'progress'},
        lualine_z = {'location'}
      },
      inactive_sections = {
        lualine_a = {},
        lualine_b = {},
        lualine_c = {'filename'},
        lualine_x = {'location'},
        lualine_y = {},
      lualine_z = {}
      },
      tabline = {},
      winbar = {},
      inactive_winbar = {},
      extensions = {}
    })
  end,
}
```

### `luasnip.lua` ä»£ç æ®µå¼•æ“

ä¸€ä¸ªæ”¯æŒè‡ªå®šä¹‰ä»£ç æ®µå’Œå¼•å…¥ç½‘ç»œä»£ç æ®µçš„å¼•æ“ï¼š

```lua
return {
  "L3MON4D3/LuaSnip",
  -- follow latest release
  version = "v2.*", -- Replace <CurrentMajor> by the latest released major (first number of latest release)
  config = function()
    local ls = require("luasnip")

    ls.config.set_config({ -- Setting LuaSnip config
      enable_autosnippets = true, -- Enable autotriggered snippets
      store_selection_keys = "<Tab>", -- Use Tab (or some other key if you prefer) to trigger visual selection
      update_events = "TextChanged, TextChangedI", -- Update text when type
    })

    local nvim_config_path = vim.fn.stdpath("config") -- get neovim configuration path
    -- Lazy-load snippets, i.e. only load when required, e.g. for a given filetype
    require("luasnip.loaders.from_lua").lazy_load({
      paths = nvim_config_path .. "/snippets"
    })

    -- vim.keymap.set({"i"}, "<C-E>", function() ls.expand() end, {silent = true})
    vim.keymap.set({"i", "s"}, "<Tab>", function() ls.jump( 1) end, {silent = true})
    vim.keymap.set({"i", "s"}, "<S-Tab>", function() ls.jump(-1) end, {silent = true})

    -- vim.keymap.set({"i", "s"}, "<C-W>", function()
    --   if ls.choice_active() then
    --     ls.change_choice(1)
    --   end
    -- end, {silent = true})
  end,
}
```

### `nvim-tree.lua` æ–‡ä»¶æµè§ˆä¾§è¾¹æ 

ä¸€ä¸ªé«˜æ€§èƒ½çš„æ–‡ä»¶æµè§ˆå™¨ä¾§è¾¹æ ï¼Œæ›¿ä»£äº†é»˜è®¤çš„ `netrw`ï¼š

```lua
return {
  "nvim-tree/nvim-tree.lua",
  cmd = {"NvimTreeToggle", "NvimTreeFocus"},
  dependencies = { "nvim-tree/nvim-web-devicons" },
  config = function()
    local nvimtree = require("nvim-tree")

    -- recommended settings from nvim-tree documentation
    vim.g.loaded_netrw = 1
    vim.g.loaded_netrwPlugin = 1

    local function on_attach(bufnr)
      local api = require('nvim-tree.api')

      local function opts(desc)
        return { desc = 'nvim-tree: ' .. desc, buffer = bufnr, noremap = true, silent = true, nowait = true }
      end

      -- custom mappings
      local keymap = vim.keymap -- for conciseness
      keymap.set('n', '<CR>', api.node.open.tab, opts('Open'))
      keymap.set('n', '<S-M>', api.node.show_info_popup, opts('Info'))
      keymap.set('n', 'h', api.node.navigate.parent_close, opts('Close Directory'))
      keymap.set('n', 'l', api.node.open.edit, opts('Open'))
      keymap.set('n', 'J', api.node.navigate.sibling.last, opts('Last Sibling'))
      keymap.set('n', 'K', api.node.navigate.sibling.first, opts('First Sibling'))
      keymap.set('n', '-', api.tree.change_root_to_parent, opts('Up'))
      keymap.set('n', 'a', api.fs.create, opts('Create'))
      keymap.set('n', 'y', api.fs.copy.node, opts('Copy'))
      keymap.set('n', 'd', api.fs.remove, opts('Delete'))
      keymap.set('n', 'D', api.fs.trash, opts('Trash'))
      keymap.set('n', '?', api.tree.toggle_help, opts('Help'))
      keymap.set('n', 'H', api.tree.toggle_hidden_filter, opts('Toggle Dotfiles'))
      keymap.set('n', 'p', api.fs.paste, opts('Paste'))
      keymap.set('n', 'O', api.node.navigate.parent, opts('Parent Directory'))
      keymap.set('n', 'q', api.tree.close, opts('Close'))
      keymap.set('n', 'r', api.fs.rename, opts('Rename'))
      keymap.set('n', 'R', api.tree.reload, opts('Refresh'))
      keymap.set('n', 'o', api.node.run.system, opts('System Open'))
      keymap.set('n', 's', api.tree.search_node, opts('Search'))
      keymap.set('n', 'v', api.node.open.vertical, opts('Vertical Split'))
      keymap.set('n', 'x', api.fs.cut, opts('Cut'))
      keymap.set('n', '<2-LeftMouse>', api.node.open.edit, opts('Open'))
    end

    -- configure nvim-tree
    nvimtree.setup({
      on_attach = on_attach,
      actions = {
        open_file = {
          quit_on_open = true,
          eject = true,
          resize_window = true,
          window_picker = {
            enable = true,
            picker = "default",
            chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",
            exclude = {
              filetype = { "notify", "packer", "qf", "diff", "fugitive", "fugitiveblame" },
              buftype = { "nofile", "terminal", "help" },
            },
          },
        },
        change_dir = {
          enable = false,
          global = false,
          restrict_above_cwd = false,
        },
        use_system_clipboard = true,
        expand_all = {
          max_folder_discovery = 300,
          exclude = {},
        },
        file_popup = {
          open_win_config = {
            col = 1,
            row = 1,
            relative = "cursor",
            border = "shadow",
            style = "minimal",
          },
        },
        remove_file = {
          close_window = true,
        },
      },
      git = {
        enable = true,
        show_on_dirs = true,
        -- show_on_open_dirs = true,
        disable_for_dirs = {},
        timeout = 500,
        cygwin_support = false,
      },
      filters = {
        git_ignored = false,
        dotfiles = false,
        git_clean = false,
        no_buffer = false,
        no_bookmark = false,
        -- custom = { ".git" },
        -- custom = { ".DS_Store" },
        exclude = {},
      },
      update_focused_file = {
        enable = true,
        update_root = true,
        ignore_list = {},
        update_cwd = true,
      },
      renderer = {
        add_trailing = false,
        group_empty = false,
        full_name = false,
        root_folder_label = ":t",
        indent_width = 2,
        special_files = {},
        symlink_destination = true,
        highlight_git = false,
        highlight_diagnostics = false,
        highlight_opened_files = "none",
        highlight_modified = "none",
        highlight_bookmarks = "none",
        highlight_clipboard = "name",
        indent_markers = {
          enable = false,
          inline_arrows = true,
          icons = {
            corner = "â””",
            edge = "â”‚",
            item = "â”‚",
            bottom = "â”€",
            none = " ",
          },
        },
        icons = {
          web_devicons = {
            file = {
              enable = true,
              color = true,
            },
            folder = {
              enable = false,
              color = true,
            },
          },
          git_placement = "before",
          modified_placement = "after",
          diagnostics_placement = "signcolumn",
          bookmarks_placement = "signcolumn",
          padding = " ",
          symlink_arrow = " â› ",
          show = {
            file = true,
            folder = true,
            folder_arrow = true,
            git = true,
            modified = true,
            diagnostics = true,
            bookmarks = false,
          },
          glyphs = {
            default = "ï’¥",
            -- toml = "ó°°¤", -- Change this to the desired icon for TOML files
            symlink = "ï’",
            bookmark = "ó°†¤",
            modified = "â—",
            folder = {
              arrow_closed = "ï‘ ",
              arrow_open = "ï‘¼",
              default = "î—¿",
              open = "î—¾",
              empty = "ï„”",
              empty_open = "ï„•",
              symlink = "ï’‚",
              symlink_open = "ï’‚",
            },
            git = {
              unstaged = "âœ",
              staged = "âœ“",
              unmerged = "îœ§",
              renamed = "âœ",
              untracked = "â˜…",
              deleted = "âœ—",
              -- deleted = "ï‘˜",
              ignored = "â—Œ",
            },
          },
        },
      },
      diagnostics = {
        enable = true,
        show_on_dirs = true,
        show_on_open_dirs = true,
        debounce_delay = 50,
        severity = {
          min = vim.diagnostic.severity.HINT,
          max = vim.diagnostic.severity.ERROR,
        },
        icons = {
          hint = "ïª",
          info = "ïš",
          warning = "ï±",
          error = "ï—",
        },
      },
      hijack_cursor = false,
      auto_reload_on_write = true,
      disable_netrw = false,
      hijack_netrw = true,
      hijack_unnamed_buffer_when_opening = false,
      root_dirs = {},
      prefer_startup_root = false,
      sync_root_with_cwd = false,
      reload_on_bufenter = false,
      respect_buf_cwd = false,
      select_prompts = false,
      sort = {
        sorter = "name",
        folders_first = true,
        files_first = false,
      },
      view = {
        centralize_selection = false,
        cursorline = true,
        debounce_delay = 15,
        side = "left",
        preserve_window_proportions = false,
        number = false,
        relativenumber = false,
        signcolumn = "yes",
        width = 30,
        float = {
          enable = false,
          quit_on_focus_loss = true,
          open_win_config = {
            relative = "editor",
            border = "rounded",
            width = 30,
            height = 30,
            row = 1,
            col = 1,
          },
        },
      },
      hijack_directories = {
        enable = true,
        auto_open = true,
      },
      system_open = {
        cmd = "",
        args = {},
      },
      modified = {
        enable = false,
        show_on_dirs = true,
        show_on_open_dirs = true,
      },
      live_filter = {
        prefix = "[FILTER]: ",
        always_show_folders = true,
      },
      filesystem_watchers = {
        enable = true,
        debounce_delay = 50,
        ignore_dirs = {},
      },
      trash = {
        cmd = "gio trash",
      },
      tab = {
        sync = {
          open = false,
          close = false,
          ignore = {},
        },
      },
      notify = {
        threshold = vim.log.levels.ERROR,
        absolute_path = true,
      },
      help = {
        sort_by = "key",
      },
      ui = {
        confirm = {
          remove = true,
          trash = true,
          default_yes = true,
        },
      },
      experimental = {},
      log = {
        enable = false,
        truncate = false,
        types = {
          all = false,
          config = false,
          copy_paste = false,
          dev = false,
          diagnostics = false,
          git = false,
          profile = false,
          watcher = false,
        },
      },
    })
  end
}
```

### `nvim-web-devicons.lua` UI ç»„ä»¶

ä¸ºå„ç§ UI ç»„ä»¶ï¼ˆå¦‚ nvim-tree, lualineï¼‰æä¾›æ–‡ä»¶ç±»å‹å›¾æ ‡ï¼š

```lua
return {
  "nvim-tree/nvim-web-devicons",
  config = function()
    require("nvim-web-devicons").set_icon({
      gql = {
        icon = "ïˆ",
        color = "#e535ab",
        cterm_color = "199",
        name = "GraphQL",
      },
    })
  end,
}
```

### `rainbow-delimiters.lua` å½©è™¹ç¬¦å·

ä¸ºé…å¯¹çš„ç¬¦å·ï¼ˆæ¯”å¦‚ `()`ï¼Œ`[]`ï¼Œ`{}`ï¼‰çš„ä¸åŒå±‚çº§æ·»åŠ ä¸åŒçš„é¢œè‰²ï¼Œæ–¹ä¾¿åŒºåˆ†ï¼š

```lua
return {
    "hiphish/rainbow-delimiters.nvim",
}
```

### `surround.lua` ç¯ç»•ç¬¦å·å¢å¼º

æ–¹ä¾¿åœ°æ·»åŠ ã€ä¿®æ”¹å’Œåˆ é™¤ç¯ç»•ç¬¦å·ï¼Œä¾‹å¦‚å°† `hello` å˜ä¸º `"hello"`ï¼š

```lua
return {
  "kylechui/nvim-surround",
  event = { "BufReadPre", "BufNewFile" },
  version = "*", -- Use for stability; omit to use `main` branch for the latest features
  config = function()
    require("nvim-surround").setup({
      keymaps = {
        insert = false,
        insert_line = false,
        normal = false,
        normal_cur = false,
        normal_line = false,
        normal_cur_line = false,
        visual = "<S-s>", -- Press <S-s> and surround sign, like ( < " ' { [
        visual_line = false,
        delete = false,
        change = false,
      },
      aliases = {
        ["a"] = false,
        ["b"] = false,
        ["B"] = false,
        ["r"] = false,
        ["q"] = false,
        ["s"] = false,
      },
    })
  end
}
```

### `telescope.lua` æ¨¡ç³Šæœç´¢

ä¸€ä¸ªé«˜åº¦å¯æ‰©å±•çš„æ¨¡ç³Šæœç´¢å·¥å…·ï¼Œç”¨äºå¿«é€ŸæŸ¥æ‰¾æ–‡ä»¶ã€ç¼“å†²åŒºã€Git æäº¤ã€å¸®åŠ©æ–‡æ¡£ç­‰ï¼š

```lua
return {
  "nvim-telescope/telescope.nvim",
  branch = "0.1.x",
  dependencies = {
    "nvim-lua/plenary.nvim",
    "debugloop/telescope-undo.nvim",
    {
      "nvim-telescope/telescope-fzf-native.nvim",
      build = "make",
    },
    "nvim-tree/nvim-web-devicons",
  },
  config = function()
    local telescope = require("telescope")
    local actions = require("telescope.actions")

    telescope.setup({
      defaults = {
        path_display = { "truncate " },
        mappings = {
          i = {
            -- ["<C-n>"] = actions.cycle_history_next,
            -- ["<C-p>"] = actions.cycle_history_prev,

            ["<C-j>"] = actions.move_selection_next,
            ["<C-k>"] = actions.move_selection_previous,

            ["<C-c>"] = actions.close,

            ["<Down>"] = actions.move_selection_next,
            ["<Up>"] = actions.move_selection_previous,

            ["<CR>"] = actions.select_default,
            -- ["<C-x>"] = actions.select_horizontal,
            -- ["<C-v>"] = actions.select_vertical,
            -- ["<C-t>"] = actions.select_tab,

            ["<C-u>"] = actions.preview_scrolling_up,
            ["<C-d>"] = actions.preview_scrolling_down,

            ["<PageUp>"] = actions.results_scrolling_up,
            ["<PageDown>"] = actions.results_scrolling_down,

            ["<Tab>"] = actions.toggle_selection + actions.move_selection_worse,
            ["<S-Tab>"] = actions.toggle_selection + actions.move_selection_better,
            ["<C-q>"] = actions.send_to_qflist + actions.open_qflist,
            ["<M-q>"] = actions.send_selected_to_qflist + actions.open_qflist,
            -- ["<C-l>"] = actions.complete_tag,
            -- ["<C-_>"] = actions.which_key, -- keys from pressing <C-/>
          },
          n = {
            ["<esc>"] = actions.close,
            ["<CR>"] = actions.select_default,
            -- ["<C-x>"] = actions.select_horizontal,
            -- ["<C-v>"] = actions.select_vertical,
            -- ["<C-t>"] = actions.select_tab,

            ["<Tab>"] = actions.toggle_selection + actions.move_selection_worse,
            ["<S-Tab>"] = actions.toggle_selection + actions.move_selection_better,
            ["<C-q>"] = actions.send_to_qflist + actions.open_qflist,
            ["<M-q>"] = actions.send_selected_to_qflist + actions.open_qflist,

            ["j"] = actions.move_selection_next,
            ["k"] = actions.move_selection_previous,
            ["K"] = actions.move_to_top,
            -- ["M"] = actions.move_to_middle,
            ["J"] = actions.move_to_bottom,

            ["<Down>"] = actions.move_selection_next,
            ["<Up>"] = actions.move_selection_previous,
            ["gg"] = actions.move_to_top,
            ["G"] = actions.move_to_bottom,

            ["<C-u>"] = actions.preview_scrolling_up,
            ["<C-d>"] = actions.preview_scrolling_down,

            ["<PageUp>"] = actions.results_scrolling_up,
            ["<PageDown>"] = actions.results_scrolling_down,

            ["?"] = actions.which_key,
          },
        },
      },
      load_extension = {
        "fzf",
        "yank_history",
      },
      extensions = {
        undo = {
          mappings = {
            i = {
              ["<C-a>"] = require("telescope-undo.actions").yank_additions,
              ["<C-d>"] = require("telescope-undo.actions").yank_deletions,
              ["<C-u>"] = require("telescope-undo.actions").restore,
              -- ["<C-Y>"] = require("telescope-undo.actions").yank_deletions,
              -- ["<C-cr>"] = require("telescope-undo.actions").restore,
              -- alternative defaults, for users whose terminals do questionable things with modified <cr>
            },
            n = {
              ["y"] = require("telescope-undo.actions").yank_additions,
              ["Y"] = require("telescope-undo.actions").yank_deletions,
              ["u"] = require("telescope-undo.actions").restore,
            },
          },
        },
      },
    })
  end,
}
```

### `todo-comments.lua` é«˜äº®ä»£ç æ³¨é‡Š

é«˜äº®ä»£ç ä¸­çš„ `TODO`ï¼Œ`WARNING`ï¼Œ`NOTE`ï¼Œ`HACK`ï¼Œ`PERF`ï¼Œ`FIX` ç­‰ç‰¹æ®Šæ³¨é‡Šï¼š

```lua
return {
    "folke/todo-comments.nvim",
    dependencies = { "nvim-lua/plenary.nvim" },
    opts = {
    }
}
```

### `treesitter.lua` è¯­æ³•é«˜äº®

æä¾›æ›´å¿«é€Ÿã€æ›´ç²¾ç¡®çš„è¯­æ³•é«˜äº®å’Œä»£ç ç»“æ„åˆ†æï¼š

```lua
return {
  "nvim-treesitter/nvim-treesitter",
  event = { "BufReadPre", "BufNewFile" },
  build = ":TSUpdate",
  dependencies = {
    "JoosepAlviste/nvim-ts-context-commentstring",
    "windwp/nvim-ts-autotag",
  },
  config = function()
    require("nvim-treesitter.configs").setup({
      -- enable syntax highlighting
      highlight = {
        enable = true,
        disable = { "css", "latex", "markdown", "cls" }, -- list of language that will be disabled
      },
      -- enable indentation
      indent = { enable = true },
      -- enable autotagging (w/ nvim-ts-autotag plugin)
      autotag = {
        enable = false,
      },
      -- ensure these language parsers are installed
      ensure_installed = {
        "bash",
        "lua",
        "vim",
        "gitignore",
        "python",
        "c",
        "cpp",
        "bibtex",
        "vimdoc",
        -- "latex",
      },
      auto_install = true,
      ignore_install = { "latex" }, -- List of parsers to ignore installing
      autopairs = {
        enable = true,
      },
      -- indent = { enable = false, disable = { "latex", "python", "css" } },
      incremental_selection = {
        enable = true,
        keymaps = {
          init_selection = "<C-n>",
          node_incremental = "<C-n>",
          scope_incremental = false,
          node_decremental = "<C-p>",
        },
      },
    })

    -- enable nvim-ts-context-commentstring plugin for commenting tsx and jsx
    require("ts_context_commentstring").setup({})
  end,
}
```

### `vimtex.lua` $\LaTeX$ é›†æˆ

 ä¸º LaTeX æä¾›äº†å¼ºå¤§çš„æ”¯æŒï¼ŒåŒ…æ‹¬ç¼–è¯‘ã€é¢„è§ˆã€ç›®å½•ã€è¯­æ³•é«˜äº®ç­‰ï¼š

```lua
return {
  "lervag/vimtex",
  ft = { "tex", "bib", "cls" }, -- åªåœ¨æ‰“å¼€ .tex, .bib, .cls æ–‡ä»¶æ—¶åŠ è½½
  init = function()
    -- Indentation settings
    vim.g.vimtex_indent_enabled = false            -- Disable auto-indent from Vimtex
    vim.g.tex_indent_items = false                 -- Disable indent for enumerate
    vim.g.tex_indent_brace = false                 -- Disable brace indent

    -- Suppression settings
    vim.g.vimtex_quickfix_mode = 0                 -- Suppress quickfix on save/build

    -- Other settings
    vim.g.vimtex_mappings_enabled = false          -- Disable default mappings
    vim.g.tex_flavor = 'latex'                     -- Set file type for TeX files
  end,
}
```

### `which-key.lua` ç¼–è¾‘ä½“éªŒå¢å¼º

å½“æŒ‰ä¸‹ `<leader>` é”®åï¼Œå¼¹çª—æç¤ºæ‰€æœ‰å¯ç”¨çš„åç»­å¿«æ·é”®ï¼ŒåŒæ—¶å®šä¹‰äº†å¤§é‡å›´ç»•æ–‡ä»¶ã€ç¼–è¯‘ã€Git å’Œ Telescope çš„å¿«æ·é”®ï¼š

```lua
return {
  "folke/which-key.nvim",
  commit = '*',
  event = "VeryLazy",
  init = function()
    vim.o.timeout = true
    vim.o.timeoutlen = 200
  end,
  opts = {
    setup = {
      show_help = true,
      plugins = {
        presets = {
          operators = false,    -- adds help for operators like d, y, ... and registers them for motion / text object completion
          motions = false,      -- adds help for motions
          text_objects = false, -- help for text objects triggered after entering an operator
          windows = false,      -- default bindings on <c-w>
          nav = false,          -- misc bindings to work with windows
          z = false,            -- bindings for folds, spelling and others prefixed with z
          g = false,            -- bindings for prefixed with g
          marks = false,        -- shows a list of your marks on ' and `
          registers = false,    -- shows your registers on " in NORMAL or <C-r> in INSERT mode
          spelling = {
            enabled = false,    -- enabling this will show WhichKey when pressing z= to select spelling suggestions
            suggestions = 10,   -- how many suggestions should be shown in the list?
          },
          -- the presets plugin, adds help for a bunch of default keybindings in Neovim
          -- No actual key bindings are created
        },
      },
      key_labels = {
        -- override the label used to display some keys. It doesn't effect WK in any other way.
        -- For example:
        -- ["<space>"] = "SPC",
        -- ["<CR>"] = "RET",
        -- ["<tab>"] = "TAB",
      },
      -- triggers = "auto", -- automatically setup triggers
      triggers = { "<leader>" }, -- or specify a list manually
      -- add operators that will trigger motion and text object completion
      -- to enable native operators, set the preset / operators plugin above
      -- operators = { gc = "Comments" },
      icons = {
        breadcrumb = "Â»", -- symbol used in the command line area that shows your active key combo
        separator = "âœ", -- symbol used between a key and it's label
        group = "+",      -- symbol prepended to a group
      },
      popup_mappings = {
        scroll_down = "<c-d>", -- binding to scroll down inside the popup
        scroll_up = "<c-u>",   -- binding to scroll up inside the popup
      },
      window = {
        border = "rounded",       -- none, single, double, shadow
        position = "bottom",      -- bottom, top
        margin = { 1, 0, 1, 0 },  -- extra window margin [top, right, bottom, left]
        padding = { 2, 2, 2, 2 }, -- extra window padding [top, right, bottom, left]
        winblend = 0,
        zindex = 1000,            -- positive value to position WhichKey above other floating windows.
      },
      layout = {
        height = { min = 4, max = 25 },                                             -- min and max height of the columns
        width = { min = 20, max = 50 },                                             -- min and max width of the columns
        spacing = 3,                                                                -- spacing between columns
        align = "left",                                                             -- align columns left, center or right
      },
      ignore_missing = true,                                                        -- enable this to hide mappings for which you didn't specify a label
      hidden = { "<silent>", "<cmd>", "<Cmd>", "<CR>", "call", "lua", "^:", "^ " }, -- hide mapping boilerplate
      triggers_nowait = {
      },
      triggers_blacklist = {
        -- list of mode / prefixes that should never be hooked by WhichKey
        -- this is mostly relevant for key maps that start with a native binding
        -- most people should not need to change this
        i = { "j", "k" },
        v = { "j", "k" },
      },
      -- disable the WhichKey popup for certain buf types and file types.
      -- Disabled by default for Telescope
      disable = {
        buftypes = {},
        filetypes = {},
      },
    },
    defaults = {
      buffer = nil,   -- Global mappings. Specify a buffer number for buffer local mappings
      silent = true,  -- use `silent` when creating keymaps
      noremap = true, -- use `noremap` when creating keymaps
      nowait = true,  -- use `nowait` when creating keymaps
      prefix = "<leader>",
      mode = { "n", "v" },
      d = { "<cmd>update! | bdelete!<CR>", "delete buffer" },
      e = { "<cmd>NvimTreeToggle<CR>", "explorer" },
      i = { "<cmd>VimtexTocOpen<CR>", "index" },
      k = {
        function()
          -- Initialize variables
          local filename = vim.fn.expand("%:p")       -- Complete file path
          local basename = vim.fn.expand("%:t:r")     -- File names without extensions
          local filetype = vim.bo.filetype            -- Current file type
          local deleted_files = {}
          local messages = {}

          -- Clean up the compiled products (c/cpp)
          if filetype == "c" or filetype == "cpp" then
            local targets = { ".exe", ".o" }
            for _, ext in ipairs(targets) do
              local file = basename .. ext
              local full_path = vim.fn.fnamemodify(filename, ":h") .. "\\" .. file
              if vim.fn.filereadable(full_path) == 1 then
                os.remove(full_path)
                table.insert(deleted_files, file)
              end
            end
          end

          -- Conditional execution of VimtexClean (LaTeX files only)
          if filetype == "tex" then
            vim.cmd("VimtexClean")  -- Clean up LaTeX auxiliary files
            table.insert(messages, "[LaTeX] already clean auxiliary files.")
          end

          -- Generate feedback information
          if #deleted_files > 0 then
            table.insert(messages, 1, "[Code] already clean compile files:\n" .. table.concat(deleted_files, "\n"))
          end
          if #messages == 0 then
            table.insert(messages, "[Code] no auxiliary file need to clean.")
          end

          -- Show notification
          vim.notify(table.concat(messages, "\n\n"), "info", {
            title = "Clean Auxiliary",
            timeout = 3000
          })
        end,
        "kill aux"
      },
      q = { "<cmd>wa! | qa!<CR>", "quit" },
      r = {
        function()
          local filename = vim.fn.expand("%:p")
          local basename = vim.fn.expand("%:t:r")
          local filetype = vim.bo.filetype
          local cmd = ""
          local quoted_filename = string.format('"%s"', filename) -- Handle paths containing Spaces

          -- Dynamically select operations based on file types
          if filetype == "tex" then
            -- LaTeX file: Triggers VimtexCompile compilation
            vim.cmd("VimtexCompile")
            return
          elseif filetype == "python" then
            cmd = "python " .. quoted_filename
          elseif filetype == "cpp" then
            local exe_name = basename .. ".exe"
            cmd = string.format("g++ %s -o %s && .\\%s", quoted_filename, exe_name, exe_name)
          elseif filetype == "c" then
            local exe_name = basename .. ".exe"
            cmd = string.format("gcc %s -o %s && .\\%s", quoted_filename, exe_name, exe_name)
          else
            vim.notify("unsupported file type: " .. filetype, "error", { title = "Run/Compile" })
            return
          end

          -- Execute the command and display the output
          local output = vim.fn.system(cmd)
          vim.api.nvim_echo({{output, "Normal"}}, false, {})
        end,
        "run code"
      },
      u = { "<cmd>Telescope undo<CR>", "undo history" },
      v = { "<cmd>VimtexView<CR>", "view" },
      w = { "<cmd>wa!<CR>", "write" },
      a = {
        name = "ACTIONS",
        c = { "<cmd>vert sb<CR>", "create split" },
        h = { "<cmd>LocalHighlightToggle<CR>", "local highlight toggle" },
        j = { "<cmd>clo<CR>", "drop split" },
        k = { "<cmd>clo<CR>", "kill split" },
        m = { "<cmd>on<CR>", "max split" },
        r = { "<cmd>VimtexErrors<CR>", "report errors" },
        w = { "<cmd>VimtexCountWords!<CR>", "word count" },
      },
      c = {
        name = "Copilot",
        d = {
          function()
            vim.cmd("Copilot disable")
            vim.notify("[Copilot] Copilot disabled", vim.log.levels.INFO, { title = "Copilot Status" })
          end,
          "disable Copilot"
        },
        e = {
          function()
            vim.cmd("Copilot enable")
            vim.notify("[Copilot] Copilot enabled", vim.log.levels.INFO, { title = "Copilot Status" })
          end,
          "enable Copilot"
        },
      },
      f = {
        name = "FIND",
        b = {
          "<cmd>lua require('telescope.builtin').buffers(require('telescope.themes').get_dropdown{previewer = false})<CR>",
          "buffers",
        },
        f = { "<cmd>Telescope live_grep theme=ivy<CR>", "project" },
        g = { "<cmd>Telescope git_commits<CR>", "git history" },
        h = { "<cmd>Telescope help_tags<CR>", "help" },
        k = { "<cmd>Telescope keymaps<CR>", "keymaps" },
        r = { "<cmd>Telescope registers<CR>", "registers" },
        w = { "<cmd>lua SearchWordUnderCursor()<CR>", "word" },
        r = { "<cmd>Telescope oldfiles<CR>", "recent" },
      },
      g = {
        name = "GIT",
        b = { "<cmd>Telescope git_branches<CR>", "checkout branch" },
        c = { "<cmd>Telescope git_commits<CR>", "commits" },
        d = { "<cmd>Gitsigns diffthis HEAD<CR>", "diff" },
        k = { "<cmd>Gitsigns prev_hunk<CR>", "prev hunk" },
        j = { "<cmd>Gitsigns next_hunk<CR>", "next hunk" },
        l = { "<cmd>Gitsigns blame_line<CR>", "line blame" },
        p = { "<cmd>Gitsigns preview_hunk<CR>", "preview hunk" },
        t = { "<cmd>Gitsigns toggle_current_line_blame<CR>", "toggle blame" },
      },
    },
  },
  config = function(_, opts)
    local wk = require("which-key")
    wk.setup(opts.setup)
    wk.register(opts.defaults)
  end,
}
```

## `snippets` æ–‡ä»¶å¤¹

æ–‡ä»¶å¤¹ä¸­çš„æ¯ä¸€ä¸ªæ–‡ä»¶å¯¹åº”äºä¸€ç§æ–‡ä»¶åç¼€ç›¸åº”çš„ä»£ç æ®µï¼Œæ¯”å¦‚è¦é…ç½® `.tex` æ–‡ä»¶ç›¸åº”çš„ Neovim åŠ è½½çš„ä»£ç æ®µï¼Œå°±åˆ›å»ºä¸€ä¸ª `tex.lua` æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­ç›¸åº”çš„ä»£ç æ®µåªä¼šåœ¨ Neovim æ‰“å¼€å¯¹åº”äº `.tex` æ–‡ä»¶æ—¶èµ·ä½œç”¨ã€‚å¦‚æœè¦é…ç½®å¯¹åº”äºæ‰€æœ‰çš„æ–‡ä»¶ç±»å‹çš„æ–‡ä»¶ï¼Œå°±æ˜¯è¯´å¦‚æœè¦é…ç½®ä»£ç æ®µå¯¹æ‰€æœ‰çš„æ–‡ä»¶éƒ½ç”Ÿæ•ˆï¼Œåˆ™è¦æŠŠç›¸åº”çš„ä»£ç æ®µæ”¾åœ¨ `all.lua` æ–‡ä»¶ä¸­ï¼ˆå¦‚æœæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶å¯ä»¥åˆ›å»ºä¸€ä¸ªï¼‰ã€‚

> å¯¹åº”çš„æ•™ç¨‹å¯ä»¥å‚è€ƒï¼š
>
> - [Supercharged LaTeX using Vim/Neovim, VimTeX, and snippets | ejmastnak](https://ejmastnak.com/tutorials/vim-latex/intro/)
> - [How I'm able to take notes in mathematics lectures using LaTeX and Vim | Gilles Castel](https://castel.dev/post/lecture-notes-1/)

### `tex.lua` $LaTeX$ é…ç½®æ–‡ä»¶

```lua
-- Summary: When `LS_SELECT_RAW` is populated with a visual selection, the function
-- returns an insert node whose initial text is set to the visual selection.
-- When `LS_SELECT_RAW` is empty, the function simply returns an empty insert node.
local get_visual = function(args, parent)
  if (#parent.snippet.env.LS_SELECT_RAW > 0) then
    return sn(nil, i(1, parent.snippet.env.LS_SELECT_RAW))
  else  -- If LS_SELECT_RAW is empty, return a blank insert node
    return sn(nil, i(1))
  end
end

-- Example: expanding a snippet on a new line only.
-- In a snippet file, first require the line_begin condition...
-- ...then add `condition=line_begin` to any snippet's context table:
local line_begin = require("luasnip.extras.expand_conditions").line_begin

-- Include this `in_mathzone` function at the start of a snippets file...
-- Then include `condition = in_mathzone` to any snippet you want to
-- expand only in math contexts.
local in_mathzone = function()
  -- The `in_mathzone` function requires the VimTeX plugin
  return vim.fn['vimtex#syntax#in_mathzone']() == 1
end

return {
--------------------------------------------------
-- Example: use of insert node placeholder text --
--------------------------------------------------
	s({ trig="hr", dscr="The hyperref package's href{}{} command (for url links)" },
	  fmta(
	    [[\href{<>}{<>}]],
	    {
	      i(1, "url"),
	      i(2, "display name"),
	    }
	  )
	),
--------------------------------------------------------
-- Example: italic font implementing visual selection --
--------------------------------------------------------
	s({ trig="tii", dscr="Expands 'tii' into LaTeX's textit{} command." },
	  fmta("\\textit{<>}",
	    {
	      d(1, get_visual),
	    }
	  )
	),
----------------------------------
-- A fun zero subscript snippet --
----------------------------------
	s({ trig='([%a%)%]%}])00', regTrig=true, wordTrig=false, snippetType="autosnippet" },
	  fmta(
	    "<>_{<>}",
	    {
	      f( function(_, snip) return snip.captures[1] end ),
	      t("0")
	    }
	  )
	),
-----------------------------------
-- Snippets for only in new line --
-----------------------------------
	-- HTML-like to insert directory hierarchy
	s({ trig="h1", snippetType="autosnippet", condition=line_begin },
	  fmta(
	    [[\section{<>}]],
	    { d(1, get_visual) }
	  )
	),

	s({ trig="h2", snippetType="autosnippet", condition=line_begin },
	  fmta(
	    [[\subsection{<>}]],
	    { d(1, get_visual) }
	  )
	),

	s({ trig="h3", snippetType="autosnippet", condition=line_begin },
	  fmta(
	    [[\section{<>}]],
	    { d(1, get_visual) }
	  )
	),

	-- Begin new environment
	s({ trig="env", dscr="A generic new environmennt", condition=line_begin },
	  fmta(
	    [[
	      \begin{<>}
	          <>
	      \end{<>}
	    ]],
	    {
	      i(1),
	      i(2),
	      rep(1),
	    }
	  )
	),
------------------------------------
-- Snippets for only in math mode --
------------------------------------
	-- Fraction
	s({ trig = "ff", snippetType="autosnippet", condition=in_mathzone },
	  fmta(
	    "\\frac{<>}{<>}",
	    {
	      i(1),
	      i(2),
	    }
	  )
	),

	-- Greek letter
	s({ trig=";a", snippetType="autosnippet", condition=in_mathzone },
	  {
	    t("\\alpha"),
	  }
	),
	s({ trig=";b", snippetType="autosnippet", condition=in_mathzone },
	  {
	    t("\\beta"),
	  }
	),
	s({ trig=";g", snippetType="autosnippet", condition=in_mathzone },
	  {
	    t("\\gamma"),
	  }
	),
}
```

